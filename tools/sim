#!/usr/bin/env python3

import os
import sys

# All times on the board are in UTC.
os.environ['TZ'] = 'UTC'

# Set the import paths relative to the parent of the tools/ directory.
command = sys.argv[0]
os.chdir(os.path.dirname(command))
os.chdir('..')
sys.path.append('.')
sys.path.append('simulator')

# Copy data files to the simulated filesystem.
import fs
fs.root = '/tmp/cclock'
for path in os.listdir():
    if path.endswith('.mcf'):
        fs.write(path, open(path, 'rb').read())

# Install monkey-patches.
import sim_display
sim_display.install()

import sim_inputs
sim_inputs.install()

import sim_network
sim_network.install(b'climateclock', b'climateclock')

# Off we go!
import start
